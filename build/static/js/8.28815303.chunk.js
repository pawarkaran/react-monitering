(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[8],{936:function(e,t,a){"use strict";a.r(t);var n=a(33),r=a(17),s=a(7),l=a.n(s),c=a(21),o=a(9),m=a(0),i=a.n(m),u=a(930),d=a(3),p=a(89),g=a(15),E=a(27),b=function(e){switch(e){case"Active":return"success";case"pending":return"dark";case"Pending":return"warning";case"cross":case"low":return"danger";default:return"primary"}},f=function(e){e},h=["number","title","service","assign_to","statusof","priority","created","breach","actions"];t.default=function(e){e.setAuth;var t=Object(m.useState)([]),a=Object(o.a)(t,2),s=a[0],v=a[1],N=Object(m.useState)([]),y=Object(o.a)(N,2),x=y[0],k=y[1],w=function(){var e=Object(c.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://164.52.201.141:3005/issues/",{method:"GET",headers:{jwt_token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,v(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(m.useEffect)((function(){w()}),[]),Object(m.useEffect)((function(){k(s)}),[s]);var O=Object(m.useState)(!1),j=Object(o.a)(O,2),S=j[0],P=j[1],C=function(){P(!S)},T=Object(m.useState)({services:"",assign_to:"",title:"",urgency:"",summary:"",statusof:""}),A=Object(o.a)(T,2),_=A[0],q=A[1],L=_.services,F=_.assign_to,I=_.title,R=_.urgency,M=_.summary,U=_.statusof,J=Object(p.a)(),z=J.register,G=J.handleSubmit,H=J.errors,B=function(){var e=Object(c.a)(l.a.mark((function e(t,a){var n,r,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),a.target.className+=" was-validated",e.prev=2,(n=new Headers).append("Content-Type","application/json"),n.append("jwt_token",localStorage.token),r={services:L,assign_to:F,title:I,urgency:R,statusof:U},e.next=9,fetch("http://164.52.201.141:3005/issues",{method:"POST",headers:n,body:JSON.stringify(r)});case 9:return s=e.sent,g.ToastsStore.success("Issue Created"),q({services:"",assign_to:"",title:"",urgency:"",summary:"",statusof:""}),P(!1),e.next=15,s.json();case 15:c=e.sent,console.log(c),console.log("done"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),console.error(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t,a){return e.apply(this,arguments)}}();function D(){q({statusof:"Acknowledged"}),console.log("cliecke")}var K=function(e){return q(Object(r.a)(Object(r.a)({},_),{},Object(n.a)({},e.target.name,e.target.value)))};return i.a.createElement("div",null,i.a.createElement(d.J,{centered:!0,show:S,onClose:C},i.a.createElement(d.M,{closeButton:!0},"Create A New Issue"),i.a.createElement(g.ToastsContainer,{store:g.ToastsStore,position:g.ToastsContainerPosition.TOP_RIGHT}),i.a.createElement(d.K,null,i.a.createElement("form",{className:"needs-validation",onSubmit:G(B),noValidate:!0},i.a.createElement("div",{className:"form-group "},i.a.createElement("label",{className:"label-form"},"Service:",i.a.createElement("span",{className:"text-danger"},"*")),i.a.createElement("input",{type:"text",onChange:K,value:L,className:"form-control input  bg-transparent border-2 outline-none rounded-sm   ",name:"services",placeholder:"Services",required:!0,minLength:"2",maxLength:"30",ref:z({required:"Please Provide Missing Field"})}),H.services&&i.a.createElement("p",{className:"text-danger pt-1"},H.services.message)),i.a.createElement("div",{className:"form-group "},i.a.createElement("label",{className:"label-form"},"Assign To:",i.a.createElement("span",{className:"text-danger"},"*")),i.a.createElement("input",{type:"text",onChange:K,value:F,className:"form-control input  bg-transparent border-2 outline-none rounded-sm   ",name:"assign_to",placeholder:"Assign to",required:!0,minLength:"2",maxLength:"30",ref:z({required:"Please Provide Missing Field"})}),H.assign_to&&i.a.createElement("p",{className:"text-danger pt-1"},H.assign_to.message)),i.a.createElement("div",{className:"form-group "},i.a.createElement("label",{className:"label-form"},"Title:",i.a.createElement("span",{className:"text-danger"},"*")),i.a.createElement("input",{type:"text",onChange:K,value:I,className:"form-control input  bg-transparent border-2 outline-none rounded-sm   ",name:"title",placeholder:"Title",required:!0,minLength:"2",maxLength:"45",ref:z({required:"Please Provide Missing Field"})}),H.title&&i.a.createElement("p",{className:"text-danger pt-1"},H.title.message)),i.a.createElement("div",{className:"form-group "},i.a.createElement("label",{className:"label-form"},"Urgency:",i.a.createElement("span",{className:"text-danger"},"*")),i.a.createElement("input",{type:"text",onChange:K,value:R,className:"form-control input  bg-transparent border-2 outline-none rounded-sm   ",name:"urgency",placeholder:"Urgency",required:!0,minLength:"2",maxLength:"30",ref:z({required:"Please Provide Missing Field"})}),H.urgency&&i.a.createElement("p",{className:"text-danger pt-1"},H.urgency.message)),i.a.createElement("div",{className:"form-group "},i.a.createElement("label",{className:"label-form"},"Summary:",i.a.createElement("span",{className:"text-danger"},"*")),i.a.createElement("textarea",{type:"text",onChange:K,value:M,className:"form-control input  bg-transparent border-2 outline-none rounded-sm   ",name:"summary",placeholder:"Summary",required:!0,maxLength:"100",ref:z({required:"Please Provide Missing Field"})}),H.summary&&i.a.createElement("p",{className:"text-danger pt-1"},H.summary.message)),i.a.createElement("div",{className:"form-group "},i.a.createElement("label",{className:"label-form"},"Status Of:"),i.a.createElement("select",{onChange:K,value:U,name:"statusof",className:"form-control input  bg-transparent border-2 outline-none rounded-sm"},i.a.createElement("option",{value:"Triggered",selected:!0},"Triggered"),i.a.createElement("option",{value:"Acknowledged"},"Acknowledged"),i.a.createElement("option",{value:"Resolved"},"Resolved"))),i.a.createElement(d.e,{type:"submit",className:"btn btn-info"},"Submit Incident"))),i.a.createElement(d.L,null)),i.a.createElement(d.m,{fluid:!0},i.a.createElement(d.U,null,i.a.createElement(d.k,{sm:"3",className:"text-center"},"Open Incidents",i.a.createElement("h5",{className:"font-weight-bold"},"2")),i.a.createElement(d.k,{sm:"3",className:"text-center"},"Open-unacknowledged",i.a.createElement("h5",{className:"font-weight-bold"},"2")),i.a.createElement(d.k,{sm:"3",className:"text-center"},"Assigned to you",i.a.createElement("h5",{className:"font-weight-bold"},"2")),i.a.createElement(d.k,{sm:"3",className:"text-center"},"Unacknowledged by you",i.a.createElement("h5",{className:"font-weight-bold"},"2")))),i.a.createElement(d.m,{fluid:!0,className:"p-4"},i.a.createElement(d.U,null,i.a.createElement("button",{type:"button",className:"btn btn-outline-dark px-4",onClick:function(){window.location.href="/#/issues"}},i.a.createElement(u.a,null),i.a.createElement(E.b,{to:"dashboard",refresh:"true",className:"text-muted"},"Refresh")),i.a.createElement(d.f,{className:"px-5"},i.a.createElement(d.e,{type:"radio",className:"btn btn-outline-dark px-3"},"Triggered"),i.a.createElement(d.e,{type:"radio",className:"btn btn-outline-dark px-4"},"Open"),i.a.createElement(d.e,{type:"radio",className:"btn btn-outline-dark px-3"},"Acknowledged"),i.a.createElement(d.e,{type:"radio",className:"btn btn-outline-dark px-3"},"Resolved"),i.a.createElement(d.e,{type:"radio",className:"btn btn-outline-dark "},"All")),i.a.createElement("button",{type:"button",className:"btn btn-outline-dark"},"Assigned to me"))),i.a.createElement(d.m,{fluid:!0,className:"pr-4 pb-2 pl-0 d-flex justify-content-end "}," ",i.a.createElement("div",null,i.a.createElement(d.e,{type:"button",className:"btn btn-info px-4",onClick:C},"New Issue"))),i.a.createElement(d.U,null,i.a.createElement(d.k,null,i.a.createElement(d.g,null,i.a.createElement(d.i,null,"Issues"),i.a.createElement(d.h,null,i.a.createElement(d.o,{items:x,fields:h,hover:!0,tableFilter:!0,columnFilterSlot:!0,clickableRows:!0,itemsPerPageSelect:!0,sorter:!0,bordered:!0,size:"lg",itemsPerPage:5,pagination:!0,scopedSlots:{number:function(e){return i.a.createElement("td",null,i.a.createElement("p",null,e.issue_id))},title:function(e){return i.a.createElement("td",null,i.a.createElement("p",null,e.title))},service:function(e){return i.a.createElement("td",null,i.a.createElement("p",null,e.services))},"Assign to":function(e){return i.a.createElement("td",null,i.a.createElement("p",null,e.assign_to))},status:function(e){return i.a.createElement("td",null,i.a.createElement(d.a,{color:b(e.statusof)},e.statusof))},priority:function(e){return i.a.createElement("td",null,i.a.createElement("p",null,e.priorities))},created:function(e){return i.a.createElement("td",null,i.a.createElement("p",null,e.created_at))},breach:function(e){return i.a.createElement("td",null,i.a.createElement("p",null,e.breach))},actions:function(e){return i.a.createElement("td",{className:"px-1"},i.a.createElement(d.e,{type:"submit",className:"btn-outline-dark m-1",size:"sm",color:f(e.actions),onClick:D},"Acknowledged",e.actions),i.a.createElement(d.e,{className:"btn-outline-dark m-1",size:"sm",color:f(e.actions)},"Resolve",e.actions))}}}))))))}}}]);
//# sourceMappingURL=8.28815303.chunk.js.map